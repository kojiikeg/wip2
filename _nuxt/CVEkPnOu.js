const __vite__fileDeps=["./BoiZZygj.js","./BgyJECtJ.js","./entry.DepPp3_X.css"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{q as k,r as _,j as $,B as P,C as A,o as I,c as D,D as R,E as U,u as q,a as s,s as B,z as L,p as M,f as T,_ as N}from"./BgyJECtJ.js";const i=n=>(M("data-v-81c0acf6"),n=n(),T(),n),O=i(()=>s("button",{class:"red","data-color":"red"},null,-1)),V=i(()=>s("button",{class:"blue","data-color":"blue"},null,-1)),j=i(()=>s("button",{class:"green","data-color":"green"},null,-1)),F=i(()=>s("button",{class:"yellow","data-color":"yellow"},null,-1)),z=[O,V,j,F],J=k({__name:"MDE",props:{content:{}},emits:["updateContent"],setup(n,{emit:h}){const y=n,v=h;let a=null;const c=_(y.content),m=_();$(c,o=>{v("updateContent",o)}),P(async()=>{const o=(await A(async()=>{const{default:t}=await import("./BoiZZygj.js").then(e=>e.e);return{default:t}},__vite__mapDeps([0,1,2]),import.meta.url)).default;a=new o({element:m.value.$el,toolbar:["bold","italic","heading","|","quote","ordered-list","unordered-list","|",{name:"color",action:C,className:"fa fa-paint-brush",title:"Color"},"link","|","preview"],spellChecker:!1,uploadImage:!0,hideIcons:["image","guide","fullscreen","side-by-side"],imageUploadFunction:x}),a.codemirror.on("change",()=>{a&&(c.value=a.value())})});const d=_(),b=(o,t)=>{const e=d.value;e.style.display="block",e.style.left=`${o}px`,e.style.top=`${t}px`},w=()=>{d.value.style.display="none"},f=o=>{document.querySelectorAll(".color-popup button").forEach(r=>{r.removeEventListener("click",f)});const e=o.target.getAttribute("data-color"),p=a.codemirror,l=p.getSelection();e&&p.replaceSelection(`<span style="color: ${e}">${l}</span>`),w()},C=()=>{const o=a.codemirror,t=o.cursorCoords(o.getCursor());document.querySelectorAll(".color-popup button").forEach(e=>{e.addEventListener("click",f)}),b(t.left,t.top)},x=(o,t,e)=>{const l=L().public.apiUrl,r=new FileReader;r.onload=async E=>{const S=E.target.result.toString().replace(/^data:\w+\/\w+;base64,/,""),u=await fetch(l+"/images",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({base64:S})});if(u.ok){const g=await u.text();a.codemirror.replaceSelection(`![images?id=${g}](${`${l}/images?id=${g}`})`)}else e(await u.text())},r.readAsDataURL(o)};return(o,t)=>(I(),D("div",null,[R(s("textarea",{ref_key:"contentArea",ref:m,"onUpdate:modelValue":t[0]||(t[0]=e=>B(c)?c.value=e:null),rows:"5",placeholder:"本文を記載",maxlength:"300"},null,512),[[U,q(c)]]),s("div",{ref_key:"colorPopup",ref:d,id:"colorPopup",class:"color-popup"},z,512)]))}}),H=N(J,[["__scopeId","data-v-81c0acf6"]]);export{H as _};
